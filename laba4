#include "TXLib.h"
#include "math.h"


#define n 200
#define h 1
#define ScreenHeight 800
#define ScreenWeight 600


const float dt=0.50;
int i,j;
double eta[n], xi[n], xxii[n];
float t,vv;

void Raschet()
{

	for (i=1;i<=n-1;i++)
	{
		xxii[i] = xi[i];
		if (i<(n/2))
		{
			vv=4;
		}
		else
		{
			vv=0.9;
		}
		eta[i]=eta[i]+vv*(xi[i + 1]-2*xi[i]+xi[i-1])/(h*h)*dt;
		}
	for (i=2;i<=n-1;i++)
		xi[i]=xi[i]+eta[i]*dt;
	xi[n]=0;
}

void Draw()
{
	txSetColor(TX_BLACK);
	txLine(i*3-3,240-(xxii[i-1]*50),i*3,240-(xxii[i]*50));
	txSetColor(TX_GREEN);
	txLine(i*3-3,240-(xi[i-1]*50),i*3,240-(xi[i]*50));

}

int main()
{

	txCreateWindow(ScreenHeight, ScreenWeight);
	while (!GetAsyncKeyState(VK_SPACE))
    {


		t=t+dt;
		if (t<6.28)
		{
			xi[1]=2*sin(t);
		}
		else
		{
			xi[1]=0;
		}
		Raschet();
		for (i=1;i<=n;i++)
		{
			Draw();
		}


	}
}
